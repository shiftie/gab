{"version":3,"sources":["classes/App.js"],"names":[],"mappings":";;;;;;;;;;;;IAMM;AACF,aADE,GACF,GAAc;8BADZ,KACY;;;AAEV,YAAI,CAAC,IAAI,SAAJ,CAAc,QAAd,EAAwB;AACzB,gBAAI,SAAJ,CAAc,QAAd,GAAyB,IAAzB,CADyB;SAA7B;AAGA,eAAO,IAAI,SAAJ,CAAc,QAAd,CALG;KAAd;;iBADE;;+BASK;AACH,gBAAI,OAAO,IAAP,CADD;AAEH,iBAAK,MAAL,GAAc;AACV,wBAAQ;AACJ,+BAAW;AACP,gCAAQ,mBAAR;AACA,iCAAS,oBAAT;qBAFJ;AAIA,4BAAQ;AACJ,iCAAS,iBAAT;AACA,sCAAc,uBAAd;qBAFJ;AAIA,+BAAW;AACP,iCAAS,oBAAT;qBADJ;AAGA,8BAAU,aAAV;AACA,6BAAS;AACL,qCAAa,sBAAb;qBADJ;AAGA,6BAAS;AACL,qCAAa,sBAAb;qBADJ;iBAhBJ;aADJ,CAFG;;AAyBH,iBAAK,OAAL,GAAe,EAAE,MAAF,CAAf,CAzBG;AA0BH,iBAAK,WAAL,GAAmB,MAAM,OAAN,EAAnB,CA1BG;AA2BH,kBAAM,IAAN,GA3BG;AA4BH,kBAAM,KAAK,WAAL,CAAN,GA5BG;AA6BH,iBAAK,WAAL,CAAiB,OAAjB,EAA0B,IAA1B,GA7BG;AA8BH,iBAAK,aAAL,GA9BG;;AAgCH,mBAAO,SAAP,CAAiB,IAAI,WAAJ,GAAkB,MAAlB,CAAyB,IAAzB,CAA8B,KAA9B,CAAoC,SAApC,EAA+C,YAAM;AAClE,qBAAK,WAAL,GAAmB,MAAM,OAAN,EAAnB,CADkE;aAAN,CAAhE,CAhCG;;;;wCAqCQ;AACX,gBAAG,OAAO,OAAP,KAAmB,WAAnB,EAA+B;AAC9B,kBAAE,MAAF,EAAU,EAAV,CAAa,OAAb,EAAsB,GAAtB,EAA2B,UAAS,CAAT,EAAW;AAClC,4BAAQ,GAAR,CAAY,WAAZ,EADkC;AAElC,wBAAG,EAAE,EAAE,MAAF,CAAF,CAAY,IAAZ,CAAiB,QAAjB,MAA+B,QAA/B,IAA2C,EAAE,EAAE,MAAF,CAAF,CAAY,IAAZ,CAAiB,MAAjB,EAAyB,OAAzB,CAAiC,SAAjC,MAAgD,CAAC,CAAD,EAAG;AAC7F,gCAAQ,GAAR,CAAa,EAAE,EAAE,MAAF,CAAF,CAAY,IAAZ,CAAiB,MAAjB,EAAyB,OAAzB,CAAiC,SAAjC,CAAb,EAD6F;AAE7F,4BAAI,MAAO,EAAE,EAAE,MAAF,CAAF,CAAY,IAAZ,CAAiB,MAAjB,CAAP,CAFyF;AAG7F,gCAAQ,GAAR,CAAY,SAAZ,EAAuB,GAAvB,EAH6F;AAI7F,0BAAE,cAAF,GAJ6F;AAK7F,gCAAQ,SAAR,CAAkB,EAAC,MAAM,GAAN,EAAnB,EAA+B,GAA/B,EAAoC,GAApC,EAL6F;AAM7F,+BAAO,OAAP,CAAe,IAAI,WAAJ,GAAkB,MAAlB,CAAyB,IAAzB,CAA8B,MAA9B,EAAsC,EAAE,MAAM,GAAN,EAAvD,EAN6F;qBAAjG;iBAFuB,CAA3B,CAD8B;aAAlC;;;;sCAeiB;AACjB,gBAAI,CAAC,IAAI,SAAJ,CAAc,QAAd,EAAwB;AACzB,uBAAO,IAAI,IAAJ,EAAP,CADyB;aAA7B,MAEO;AACH,uBAAO,IAAI,SAAJ,CAAc,QAAd,CADJ;aAFP;;;;WA/DF","file":"classes/App.js","sourcesContent":["/* exported App */\n/* global Utils */\n/* global Pages */\n/* global Menu */\n/* global PubSub */\n\nclass App {\n    constructor() {\n        /* Singleton */\n        if (!App.prototype.instance) {\n            App.prototype.instance = this;\n        }\n        return App.prototype.instance;\n    }\n\n    init() {\n        let self = this;\n        this.events = {\n            'page': {\n                'contact': {\n                    'open': 'page.contact.open',\n                    'close': 'page.contact.close'\n                },\n                'home': {\n                    'ready': 'page.home.ready',\n                    'slideReady': 'page.home.slide.ready'\n                },\n                'project': {\n                    'ready': 'page.project.ready'\n                },\n                'change': 'page.change',\n                'intro': {\n                    'completed': 'page.intro.completed'\n                },\n                'outro': {\n                    'completed': 'page.outro.completed'\n                }\n            }\n        };\n\n        self.$window = $(window);\n        self.currentView = Utils.getView();\n        Pages.init();\n        Pages[self.currentView]();\n        Menu.getInstance('.menu').init();\n        self.handleHistory();\n\n        PubSub.subscribe(App.getInstance().events.page.intro.completed, () => {\n            self.currentView = Utils.getView();\n        });\n    }\n\n    handleHistory(){\n        if(typeof history !== 'undefined'){\n            $('body').on('click', 'a', function(e){\n                console.log('interrupt');\n                if($(e.target).attr('target') !== '_blank' && $(e.target).attr('href').indexOf('mailto:') === -1){\n                    console.log( $(e.target).attr('href').indexOf('mailto:'));\n                    let url =  $(e.target).attr('href');\n                    console.log('pushing', url);\n                    e.preventDefault();\n                    history.pushState({page: url}, url, url);\n                    PubSub.publish(App.getInstance().events.page.change, { href: url });\n                }\n            });\n        }\n    }\n\n    static getInstance() {\n        if (!App.prototype.instance) {\n            return new this();\n        } else {\n            return App.prototype.instance;\n        }\n    }\n}\n"],"sourceRoot":"/source/"}